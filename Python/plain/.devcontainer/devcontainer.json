// See https://containers.dev/implementors/json_reference/ for configuration reference
{
  "name": "core",
  "build": {
      "context": "..",
      "dockerfile": "../docker/Dockerfile"
  },
  // CUDAを使わない場合は、以下をコメントアウト
  // <<< CUDA Setup >>>
  "runArgs": [
	 	"--gpus",
	 	"all"
	 ],
	 "features": {
	 	"ghcr.io/devcontainers/features/nvidia-cuda": {
	 		"cudaVersion": 12.4
	 	}
	},
  // <<< CUDA Setup >>>
  "onCreateCommand": "rye config --set-bool behavior.use-uv=true && rye sync",
  "workspaceFolder": "/home/core",
  "workspaceMount": "source=${localWorkspaceFolder},target=/home/core,type=bind,consistency=cached",

  "customizations": {
      "vscode": {
          "settings": {
              "editor.formatOnSave": true,
              "python.defaultInterpreterPath": "${workspaceFolder}/.venv/bin/python",
              "better-comments.multilineComments": true,
              "better-comments.highlightPlainText": true
          },
          "extensions": [
              // Theme
              "PKief.material-icon-theme", // Material Icon Theme
              "GitHub.github-vscode-theme", // GitHub Theme
              // Python 関係
              "ms-python.python", // Python
              "charliermarsh.ruff", // Ruff
              "ms-toolsai.jupyter", // Jupyter
              // その他
              "njpwerner.autodocstring", // autoDocstring
              "aaron-bond.better-comments", // better-comments
              "usernamehw.errorlens", // Error Lens
              "GrapeCity.gc-excelviewer", // Excel Viewer
              "oderwat.indent-rainbow", // Indent Rainbow
              "christian-kohler.path-intellisense", // Path Intellisense
              "shardulm94.trailing-spaces", // Trailing Spaces
              "mosapride.zenkaku" // Zenkaku
          ]
      }
  },

  // VSCodeを閉じた時、コンテナが自動停止するように指定
  "shutdownAction": "stopContainer"
}
